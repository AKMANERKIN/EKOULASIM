<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACOS Hesaplayıcı - Amazon & E-ticaret Reklam Performans Analizi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center p-4">

  <h1 class="text-2xl font-bold mb-4">ACOS Hesaplayıcı</h1>

  <form id="acosForm" class="space-y-4 max-w-md w-full bg-white p-6 rounded-lg shadow">
    <div>
      <label for="adSpend" class="block mb-1">Reklam Harcaması</label>
      <input type="number" id="adSpend" step="0.01" class="w-full border p-2 rounded">
      <p id="adSpendError" class="text-red-600 text-sm hidden"></p>
    </div>

    <div>
      <label for="attributedSales" class="block mb-1">Reklamdan Gelen Satış</label>
      <input type="number" id="attributedSales" step="0.01" class="w-full border p-2 rounded">
      <p id="attributedSalesError" class="text-red-600 text-sm hidden"></p>
    </div>

    <div>
      <label for="totalSales" class="block mb-1">Toplam Satış (Opsiyonel)</label>
      <input type="number" id="totalSales" step="0.01" class="w-full border p-2 rounded">
    </div>

    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Hesapla</button>
    <button type="button" id="sampleDataBtn" class="w-full bg-gray-200 py-2 rounded">Örnek Veriler</button>
  </form>

  <div id="emptyState" class="mt-6 text-gray-500">Henüz hesaplama yapılmadı.</div>

  <div id="resultsContainer" class="hidden mt-6 max-w-md w-full bg-white p-6 rounded-lg shadow">
    <div id="acosResult" class="rounded-xl p-6 mb-4 text-center">
      <p class="text-lg font-bold">ACOS: <span id="acosValue">-</span></p>
      <p id="acosStatus" class="text-sm text-gray-600">-</p>
    </div>
    <p><strong>ROAS:</strong> <span id="roasValue">-</span></p>
    <p id="tacosContainer" class="hidden"><strong>TACoS:</strong> <span id="tacosValue">-</span></p>
    <p id="summaryText" class="mt-2 text-gray-700 text-sm"></p>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('acosForm');
    const adSpendInput = document.getElementById('adSpend');
    const attributedInput = document.getElementById('attributedSales');
    const totalSalesInput = document.getElementById('totalSales');
    const sampleBtn = document.getElementById('sampleDataBtn');

    const resultsContainer = document.getElementById('resultsContainer');
    const emptyState = document.getElementById('emptyState');
    const acosValue = document.getElementById('acosValue');
    const acosStatus = document.getElementById('acosStatus');
    const acosResult = document.getElementById('acosResult');
    const roasValue = document.getElementById('roasValue');
    const tacosContainer = document.getElementById('tacosContainer');
    const tacosValue = document.getElementById('tacosValue');
    const summaryText = document.getElementById('summaryText');
    const adSpendError = document.getElementById('adSpendError');
    const attributedSalesError = document.getElementById('attributedSalesError');

    function clearErrors() {
      adSpendError.textContent = '';
      adSpendError.classList.add('hidden');
      attributedSalesError.textContent = '';
      attributedSalesError.classList.add('hidden');
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      clearErrors();

      const adSpend = parseFloat(adSpendInput.value);
      const attributed = parseFloat(attributedInput.value);
      const total = parseFloat(totalSalesInput.value);

      let hasError = false;
      if (isNaN(adSpend) || adSpend < 0) {
        adSpendError.textContent = 'Geçerli bir reklam harcaması girin.';
        adSpendError.classList.remove('hidden');
        hasError = true;
      }
      if (isNaN(attributed) || attributed <= 0) {
        attributedSalesError.textContent = 'Reklamdan gelen satış 0\'dan büyük olmalı.';
        attributedSalesError.classList.remove('hidden');
        hasError = true;
      }
      if (hasError) return;

      // Hesaplamalar
      const acos = (adSpend / attributed) * 100;
      const roas = adSpend === 0 ? '∞' : (attributed / adSpend).toFixed(2) + 'x';
      const tacos = (!isNaN(total) && total > 0) ? (adSpend / total) * 100 : null;

      // Sonuç yazdır
      acosValue.textContent = acos.toFixed(2) + '%';
      if (acos < 15) {
        acosResult.className = "bg-green-100 text-green-700 rounded-xl p-6 mb-4 text-center";
        acosStatus.textContent = "Mükemmel Performans";
      } else if (acos <= 30) {
        acosResult.className = "bg-yellow-100 text-yellow-700 rounded-xl p-6 mb-4 text-center";
        acosStatus.textContent = "İyi Performans";
      } else {
        acosResult.className = "bg-red-100 text-red-700 rounded-xl p-6 mb-4 text-center";
        acosStatus.textContent = "Yüksek ACOS – İyileştirme Gerekli";
      }

      roasValue.textContent = roas;
      if (tacos !== null) {
        tacosContainer.classList.remove('hidden');
        tacosValue.textContent = tacos.toFixed(2) + '%';
      } else {
        tacosContainer.classList.add('hidden');
      }

      summaryText.textContent = `ACOS: ${acos.toFixed(2)}%. ROAS: ${roas}. TACoS: ${tacos !== null ? tacos.toFixed(2)+'%' : '-'}`;

      emptyState.classList.add('hidden');
      resultsContainer.classList.remove('hidden');
    });

    sampleBtn.addEventListener('click', () => {
      adSpendInput.value = "120.50";
      attributedInput.value = "800.00";
      totalSalesInput.value = "2500.00";
      form.dispatchEvent(new Event('submit'));
    });
  });
  </script>
</body>
</html>

